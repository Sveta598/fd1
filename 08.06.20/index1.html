<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Шахматная доска</title>
</head>
<body>
    <script>
        var chessTable = [
            [],
            [],
            [],
            [],
            [],
            [],
            [],
            [],
        ];
        // var letters = ["a", "b", "c", "d", "e", "f", "g", "h"];
        var letters = "abcdefgh";
        for (var i = 0; i <= 7; i++) {
            for (var j = 0; j <= 7; j++) {
                chessTable[i][j] = {};
                chessTable[i][j].number = i + 1;
                chessTable[i][j].letter = letters[j];
                chessTable[i][j].figure = {};
                if (i % 2 === 0) {
                    if (j % 2 === 0) {
                        chessTable[i][j].color = "#FFFFFF";
                    } else {
                        chessTable[i][j].color = "#000000";
                    }
                } else {
                    if (j % 2 === 0) {
                        chessTable[i][j].color = "#000000";
                    } else {
                        chessTable[i][j].color = "#FFFFFF";
                    }
                }
                if (i === 1 || i === 6) {
                    chessTable[i][j].figure.rank = "пешка";
                }
                if (i === 0 || i === 1) {
                    chessTable[i][j].figure.color = "#FFFFFF";
                }
                if (i === 6 || i === 7) {
                    chessTable[i][j].figure.color = "#000000";
                }
            }
        }
        chessTable[0][0].figure.rank = chessTable[0][7].figure.rank = chessTable[7][0].figure.rank = chessTable[7][7].figure.rank = "ладья";
        chessTable[0][1].figure.rank = chessTable[0][6].figure.rank = chessTable[7][1].figure.rank = chessTable[7][6].figure.rank = "конь";
        chessTable[0][2].figure.rank = chessTable[0][5].figure.rank = chessTable[7][2].figure.rank = chessTable[7][5].figure.rank = "офицер";
        chessTable[0][3].figure.rank = chessTable[7][3].figure.rank = "ферзь";
        chessTable[0][4].figure.rank = chessTable[7][4].figure.rank = "король";
        console.log(chessTable);

        function getLetter(message) {
        //while(true) {
                var letter = prompt("Введите буквенную координату фигуры, которую хотите переместить");
            if (
                letter === "a" ||
                letter === "b" ||
                letter === "c" ||
                letter === "d" ||
                letter === "e" ||
                letter === "f" ||
                letter === "g" ||
                letter === "h"
            ) {
                return letter;
            } else {
                alert("Введите букву от a до h");
            }
            }
        //}

        function getNum() {
            //while (true) {
                    var num = parseInt(prompt("Введите цифру от 1 до 8"), 10);
                    if (isNan(num) || num < 1 || num > 8) {
                    alert("Введите цифру от 1 до 8");
                } else {
                    return num;
                }
            //}
        }

        function hasFigure() {
            for (var i = 0; i < chesstable.length; i++) {
                for (var j = 0; j < chesstable[i].length; j++) {
                    if(
                        letter === chessTable[i][j].letter &&
                        num === chessTable[i][j].number
                        ) {
                        return chessTable[i][j].figure.rank !== undefined;
                        true;
                    }   
                }

            }
                 
        }
        
        function getIndexes(letter, num) {
            for (var i = 0; i < chesstable.length; i++) {
                for (var j = 0; j < chesstable[i].length; j++) {
                    if (
                        letter === chessTable[i][j].letter &&
                        num === chessTable[i][j].number
                    ) {
                        return {
                            i,
                            j,
                        };
                    }
                }
            }
        }

       do {


        while (!hasFigure(letterFrom, numFrom)) {
           var letterFrom = getLetter("Введите буквенную координату фигуры, которую хотите пеместить");
            var numFrom = getNum();
       }

       var indexesFrom = getIndexes(letterFrom, numFrom);
       
       do {
            var letterTo = getLetter("Введите буквенную координату клетки, на которую хотите пеместить фигуру");
            var numTo = getNum();
       } while (hasFigure(letterTo, numTo));
       var IndexesTo = getIndexes(letterTo, numTo);

       chessTable[indexesTo.i][indexesTo.j] = chessTable[indexesFrom.i][indexesFrom.j].figure = {};
       chessTable[indexesFrom.i][indexesFrom.j].figure =      

              /* while (true) {
                    var numFrom = parseInt(prompt("Введите цифру от 1 до 8"), 10);
                    if (isNan(numFrom) || numFrom < 1 || numFrom > 8) {
                    alert("Введите цифру от 1 до 8");
                } else{
                    console.log(numFrom);
                    var iFrom;
                    varjFrom;
                    
                    console.log(iFrom, jFrom, chessTable[iFRom][jFrom])
                    break;
                } 
                }
                
                break;
            } else {
                alert("Введите букву от a до h");
                break;
            }
           }
            */
            
       } while (confirm("Желаете продолжить?"));
       console.log(chessTable);
    </script>
</body>
</html>